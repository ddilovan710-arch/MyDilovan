<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>๐ ุงูุจูุน</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://unpkg.com/html5-qrcode"></script>
  <style>.scanner{width:180px;margin:auto;}</style>
</head>
<body>
<audio id="beep" src="beep.mp3" preload="auto"></audio>

<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <div class="container-fluid">
    <a class="navbar-brand" href="index.html">๐ฆ ุงูููุชุฌุงุช</a>
    <div>
      <a class="btn btn-outline-light" href="sales.html">๐ ุงูุจูุน</a>
      <a class="btn btn-outline-light" href="profit.html">๐ฐ ุงูุฑุจุญ</a>
      <a class="btn btn-outline-light" href="history.html">๐ ุงูุณุฌู</a>
    </div>
  </div>
</nav>

<div class="container mt-3">
  <h2 class="text-center">๐ ุนูููุฉ ุจูุน</h2>

  <div id="reader" class="scanner"></div>
  <p id="result" class="text-center">๐ท ุงูุณุญ ุจุงุฑููุฏ...</p>

  <div class="card p-3 shadow">
    <input id="barcode" class="form-control mb-2" placeholder="ุงูุจุงุฑููุฏ">
    <input id="qty" class="form-control mb-2" type="number" placeholder="ุงููููุฉ ุงููุจุงุนุฉ">
    <button class="btn btn-primary w-100" onclick="sellProduct()">๐ฐ ุจูุน</button>
  </div>
</div>

<script>
const API="YOUR_SCRIPT_URL";
const beep=document.getElementById("beep");

function onScanSuccess(decodedText){
  document.getElementById("barcode").value=decodedText;
  document.getElementById("result").innerText="โ "+decodedText;
  beep.play();
}
new Html5QrcodeScanner("reader",{fps:10,qrbox:150}).render(onScanSuccess);

function sellProduct(){
  let data={action:"sellProduct",
    barcode:document.getElementById("barcode").value,
    qty:parseInt(document.getElementById("qty").value)};
  fetch(API,{method:"POST",body:JSON.stringify(data)})
  .then(r=>r.text()).then(msg=>alert("โ "+msg));
}
</script>
</body>
</html>
